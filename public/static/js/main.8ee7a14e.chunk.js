(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports=a(21)},17:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(8),r=a.n(c),s=(a(17),a(6)),o=a.n(s),u=a(9),i=a(11),m=a(1),h=a(2),d=a(4),p=a(3),f=a(5),E=a(10),b=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data.sort(function(e,t){return t.value-e.value}).map(function(t,a){if(a<e.props.rows)return l.a.createElement("tr",null,l.a.createElement("td",null,a+1),l.a.createElement("td",null,t.id),l.a.createElement("td",null,t.value),l.a.createElement("td",null,t.name))});return l.a.createElement("div",null,l.a.createElement("table",{className:"container"},l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("h1",null,"Entry #")),l.a.createElement("th",null,l.a.createElement("h1",null,"ID")),l.a.createElement("th",null,l.a.createElement("h1",null,"Value")),l.a.createElement("th",null,l.a.createElement("h1",null,"Name"))),t))}}]),t}(n.Component);b.defaultProps={data:[],rows:10};var w=b,v=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={items:null,mps:null,data:[]},a.ws=new E.a("ws://localhost:7770",{onopen:function(e){return console.log("Connected!",e)},onmessage:function(e){var t=null;try{t=JSON.parse(e.data)}catch(e){console.log("malformed message")}t&&(console.log(JSON.stringify(t)),a.handleNewData(t))}}),a.handleNewData=function(e){setTimeout(function(){a.setState({data:Object(i.a)(a.state.data).concat([e])})},100)},a.fetchData=function(){a.ws.send("init")},a.stopFetchData=function(){a.ws.send("close")},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark(function e(){var t,a,n,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/data");case 2:return t=e.sent,e.next=5,t.json();case 5:for(a=e.sent,n=[],l=0;l<a.numberItems;l++)n.push({id:l,value:l,name:"test name - ".concat(l)});this.setState({items:a.numberItems,mps:a.numberMessages,data:n});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"top-wrap"},l.a.createElement("h1",{className:"title"},"React Websocket Update"),l.a.createElement("button",{onClick:this.fetchData,className:"data-button"},"Fetch Data"),l.a.createElement("button",{onClick:this.stopFetchData,className:"data-button"},"Stop Fetching")),l.a.createElement(w,{data:this.state.data,rows:this.state.items}))}}]),t}(n.Component);r.a.render(l.a.createElement(v,null),document.getElementById("root"))}},[[12,2,1]]]);
//# sourceMappingURL=main.8ee7a14e.chunk.js.map